<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="we_cotation_bom_line_calculation_template_tree_view" model="ir.ui.view">
        <field name="name">we.cotation.bom_line.calculation.template.tree.view</field>
        <field name="model">we.cotation.bom.line.calculation.template</field>
        <field name="arch" type="xml">
            <tree string="">
                <field name="sequence" widget="handle" />
                <field name="name" />
                <field name="type" />
                <field name="length" />
                <field name="width" />
                <field name="thickness" />
                <field name="quantity" />
                <field name="material_id" />
                <field name="allow_rot" />
            </tree>
        </field>
    </record>
    <record id="we_cotation_bom_line_calculation_template_form_view" model="ir.ui.view">
        <field name="name">we.cotation.bom_line.calculation.template.form.view</field>
        <field name="model">we.cotation.bom.line.calculation.template</field>
        <field name="arch" type="xml">
            <form string="Cotation Line Template">
                <sheet>
                    <group>
                        <group>
                            <field name="name" />
                            <field name="type" />
                            <field name="length" />
                            <field name="width" />
                            <field name="thickness" />
                            <field name="quantity" />
                            <field name="material_id" />
                            <field name="allow_rot" />
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="we_cotation_bom_line_calculation_view_form" model="ir.ui.view">
        <field name="name">we.cotation.bom_line.calculation.view.form</field>
        <field name="model">we.cotation.bom.line.calculation</field>
        <field name="arch" type="xml">
            <form string="Calculation">
                <sheet>

                    <group>
                        <group string="General">
                            <field name="tmpl_id" />
                            <field name="type" />
                            <field name="no_best" invisible="1"/>
                            <field name="no_value" invisible="1"/>
                            <field name="currency_id" invisible="0" />
                            <div class="o_row">
                                <div class="alert alert-danger text-wrap text-capitalize font-weight-bold lead" attrs="{'invisible': [ ('no_value', '=', False)]}">
                                Setup/Check your values
                                </div>
                                <div class="alert alert-danger text-wrap text-capitalize font-weight-bold lead" attrs="{'invisible': ['|',  ('no_best', '=', False),('no_value','=',True)]}">
                                there is no format that fit piece
                                </div>
                            </div>
                        </group>

                        <div class="clearfix"/>
                        <group string="Piece dimension">
                            <field name="length" />
                            <field name="width" />
                            <field name="quantity" />
                            <field name="thickness" />
                            <field name="allow_rot" />
                        </group>
                        <group string="Material">
                            <field name="material_id" string="material" widget="many2one"/>
                            <field name="material_volmass" string="Volumic mass"/>
                            <field name="material_price" string="Price"/>
                        </group>
                        <group string="Informations">
                            <field name="piece_perimetre" />
                            <field name="piece_surface" />
                            <field name="piece_weight" />
                        </group>
                        <group string="Distances">
                            <field name="x_space" />
                            <field name="y_space" />
                        </group>
                        <group string="Protection">
                            <field name="left_sheetmetal_protection" />
                            <field name="right_sheetmetal_protection" />
                            <field name="top_sheetmetal_protection" />
                            <field name="bottom_sheetmetal_protection" />
                        </group>
                        <group string="Formats">
                            <field name="allowed_sheetmetal_ids" mode="tree">
                                <tree string="Allowed format" editable="bottom">
                                    <field name="available" />
                                    <field name="length" />
                                    <field name="width" />
                                    <field name="percentage_loss" />
                                    <field name="best" />
                                </tree>
                            </field>
                        </group>
                        <group string="Resultat">
                            <field name="best_piece_format" string="Format piece"/>
                            <field name="best_sheetmetal_format" string="format sheetmetal"/>
                            <field name="qty_per_sheetmetal" />
                            <field name="weight_per_piece" />
                            <field name="percentage_loss" />
                            <field name="total_piece_weight" />
                            <field name="total_piece_surface" />
                        </group>
                        <group string="Cost">
                            <field name="unit_price" />
                            <field name="total_price" />
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <record id="we_cotation_bom_line_calculation_view_tree" model="ir.ui.view">
        <field name="name">we.cotation.bom_line.calculation.view.tree</field>
        <field name="model">we.cotation.bom.line.calculation</field>
        <field name="arch" type="xml">
            <tree>
                <field name="type" />
                <field name="length" />
                <field name="width" />
            </tree>
        </field>
    </record>
    <record id="we_cotation_bom_line_calculation_template_action" model="ir.actions.act_window">
        <field name="name">Calculations Templates</field>
        <field name="res_model">we.cotation.bom.line.calculation.template</field>
        <field name="view_mode">tree,form</field>
    </record>
    <record id="we_cotation_bom_line_calculation_action" model="ir.actions.act_window">
        <field name="name">Calculations</field>
        <field name="res_model">we.cotation.bom.line.calculation</field>
        <field name="view_mode">tree,form</field>
    </record>
    <menuitem id="we_cotation_bom_line_calculation_menu" name="Calculations" action="we_cotation_bom_line_calculation_action" parent="we_cotation_base_menu" sequence="3"/>
    <menuitem id="we_cotation_bom_line_calculation_template_menu" name="Calculations templates" action="we_cotation_bom_line_calculation_template_action" parent="we_cotation_base_menu" sequence="4"/>

</odoo>
